---
description: Git commit rules, workflow standards, and branch management for the Divemap project
globs: ["**/*"]
alwaysApply: true
---

# Git Commit Rules

See core-essentials.mdc for basic commit rules.

## Core Requirements

- Never commit automatically - Only when user explicitly requests
- Always ask permission before committing
- Never commit after being asked once - Always ask again
- Always provide clear commit messages when requested

## The Seven Rules of Great Git Commit Messages

Based on [Chris Beams' guidelines](https://gist.github.com/julienbourdeau/e605e4b8b47da97c249a0f72598529c8):

1. **Separate subject from body** with blank line
2. **Limit subject to 50 characters**
3. **Capitalize subject line**
4. **No period** at end of subject
5. **Use imperative mood** ("Add", "Fix", "Update", "Remove")
6. **Wrap body at 72 characters**
7. **Explain what and why**, not how

## Commit Message Template

```bash
<imperative verb> <what was changed>

<Detailed explanation wrapped at 72 characters>
<Additional context if needed>

<Optional: Fixes #issue_number>
```

## Example

```bash
Add user authentication endpoint

Implement OAuth2 authentication flow for Google login.
This allows users to sign in using their Google accounts.

Fixes #123
```

## Branch Management

- **ALWAYS create feature branch** for code changes: `feature/[task-name-kebab-case]`
- **NEVER work directly on main/master**
- Use kebab-case, descriptive names
- After merge: delete branch locally and remotely

## Chat Session Workflow

1. Create feature branch at start
2. Make incremental commits after logical units
3. Each commit should be complete and testable
4. When user satisfied: offer to squash and create PR

## Branch Cleanup

After successful merge:

```bash
git checkout master
git pull origin master
git branch -d feature/branch-name
git push origin --delete feature/branch-name
```
