# Divemap Environment Configuration
# Copy this file to .env and modify with your secure values

# Database Configuration
MYSQL_ROOT_PASSWORD=your_secure_root_password_here
MYSQL_DATABASE=divemap
MYSQL_USER=divemap_user
MYSQL_PASSWORD=your_secure_database_password_here

# Backend Configuration
# Generate a secure secret: openssl rand -hex 32
SECRET_KEY=your_very_long_random_secret_key_here_minimum_32_characters

# Token Configuration
ACCESS_TOKEN_EXPIRE_MINUTES=15          # Short-lived for security
REFRESH_TOKEN_EXPIRE_DAYS=30           # Longer-lived for convenience
REFRESH_TOKEN_COOKIE_SECURE=false      # Set to true in production (HTTPS)
REFRESH_TOKEN_COOKIE_HTTPONLY=true     # Prevent XSS attacks
REFRESH_TOKEN_COOKIE_SAMESITE=strict   # Maximum security since we're behind nginx
ENABLE_TOKEN_ROTATION=true             # Issue new refresh token with each refresh
ENABLE_AUDIT_LOGGING=true              # Log authentication events
MAX_ACTIVE_SESSIONS_PER_USER=5         # Limit concurrent sessions

# JWT Configuration
ALGORITHM=HS256                        # JWT signing algorithm

# Development Environment
ENVIRONMENT=development
NODE_ENV=development
CORS_ORIGINS=http://localhost
ALLOWED_ORIGINS=http://localhost
SUSPICIOUS_PROXY_CHAIN_LENGTH=3       # Development: Stricter monitoring for local development

# External Services
OPENAI_API_KEY=your_openai_api_key_here
# Google OAuth Configuration
# Get these from Google Cloud Console: https://console.cloud.google.com/
#GOOGLE_CLIENT_ID=your_google_client_id_here
#GOOGLE_CLIENT_SECRET=your_google_client_secret_here

# Cloudflare Turnstile Configuration
# Get these from Cloudflare Dashboard: https://dash.cloudflare.com/?to=/:account/turnstile
TURNSTILE_SECRET_KEY=your_turnstile_secret_key_here
TURNSTILE_SITE_KEY=your_turnstile_site_key_here
TURNSTILE_VERIFY_URL=https://challenges.cloudflare.com/turnstile/v0/siteverify

# Production Environment
#ENVIRONMENT=production
#CORS_ORIGINS=https://divemap.gr,https://divemap.fly.dev
#ALLOWED_ORIGINS=https://divemap.gr,https://divemap.fly.dev
#REFRESH_TOKEN_COOKIE_SECURE=true       # HTTPS required in production
#REFRESH_TOKEN_COOKIE_SAMESITE=strict   # Maximum security in production
#SUSPICIOUS_PROXY_CHAIN_LENGTH=6       # Production: Cloudflare + Fly.io + nginx + frontend + backend = ~6 hops


# Security Notes:
# 1. Generate strong passwords using: openssl rand -base64 32
# 2. Generate JWT secret using: openssl rand -hex 32
# 3. Never commit .env file to version control
# 4. Use different passwords for each service
# 5. Rotate secrets regularly in production 
